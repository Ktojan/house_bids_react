(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(5812)}])},5812:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var r=s(5893),a=s(7294),n=s(5392),o={home:"Home",houseDetails:"HouseDetails"},i=s(3967),l=s.n(i),c=e=>{let{headerText:t,aboutProject:s}=e,{navigate:i}=(0,a.useContext)(b);return(0,r.jsxs)("header",{className:"row mb-4",children:[(0,r.jsx)("div",{className:"col-3",children:(0,r.jsx)("img",{onClick:()=>i(o.home),className:l()(n.logo,"pointer"),src:"./logo2.jpeg",alt:"logo",title:"click to main page"})}),(0,r.jsxs)("div",{className:"col-8 text-xxl offset-1",children:[(0,r.jsx)("h2",{children:t}),(0,r.jsxs)("p",{children:[(0,r.jsx)("i",{children:s}),(0,r.jsx)("a",{className:n.github,href:"https://github.com/Ktojan/house_bids_react",target:"_blank",children:"code on Github"})]})]})]})};let d=Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",maximumFractionDigits:0,useGrouping:!0}),h=a.memo(e=>{let{house:t}=e,{currentNav:s,navigate:n}=(0,a.useContext)(b);return(0,r.jsxs)("tr",{onClick:()=>n(o.houseDetails,t),children:[(0,r.jsx)("td",{children:t.address}),(0,r.jsx)("td",{children:t.country}),(0,r.jsx)("td",{children:t.paranormal_feature||t.description}),t.price>0&&(0,r.jsx)("td",{children:d.format(t.price)})]})});function u(e){let{setHouses:t,HOUSES:s,countries:n}=e,o={country:n[0],address:"",description:"",price:""},[i,l]=(0,a.useState)(o);function c(e){let t="price"===e.target.name&&e.target.value?Number(e.target.value):e.target.value;l({...i,[e.target.name]:t})}return(0,r.jsxs)("details",{children:[(0,r.jsx)("summary",{children:"Add new house"}),(0,r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("Adding new house: ",i),i&&i.address&&!(i.address.length<5)&&i.price?function(e){fetch("/api/houses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(async e=>{t([...s,await e.json()]),l(o)}).catch(e=>console.error(e))}(i):alert("Check, please, that you have provided a valid price and address is not too short")},className:"add-house-form row",children:[(0,r.jsxs)("div",{className:"col-3",children:[(0,r.jsx)("label",{children:"Address *"}),(0,r.jsx)("input",{type:"text",name:"address",value:i.address,onChange:c})]}),(0,r.jsxs)("div",{className:"col-2",children:[(0,r.jsx)("label",{children:"Country "}),(0,r.jsx)("select",{name:"country",value:i.country,onChange:c,children:n.map((e,t)=>(0,r.jsx)("option",{value:e,children:e},t))})]}),(0,r.jsx)("div",{className:"col-2",children:(0,r.jsx)("img",{width:"100%",src:"./hands1.webp",alt:"ghost",title:"just a ghost"})}),(0,r.jsxs)("div",{className:"col-1",children:[(0,r.jsx)("label",{children:"Price, $ *"}),(0,r.jsx)("input",{type:"number",name:"price",value:i.price,onChange:c})]}),(0,r.jsxs)("div",{className:"col-3",children:[(0,r.jsx)("label",{children:"Description "}),(0,r.jsx)("textarea",{rows:"1",type:"text",name:"description",style:{display:"block",width:"100%"},value:i.description,onChange:c})]}),(0,r.jsx)("div",{className:"col-1",children:(0,r.jsx)("button",{className:"btn add-new-button",type:"submit",style:{padding:"0.8rem 1.2rem"},children:"Add"})})]})]})}function m(e){let{loadingState:t}=e;return(0,r.jsx)(()=>(0,r.jsxs)("h2",{children:["... ",t," ..."]}),{})}let x={loaded:"loaded",isLoading:"Loading some mystics. Wait...",hasErrored:"An error has ocurred while loading"};var j=function(){let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)([]),[n,o]=(0,a.useState)(x.isLoading);return(0,a.useEffect)(()=>{(async()=>{o(x.isLoading);try{let e=await fetch("/api/houses"),s=await e.json();t(s);let a=[...new Set(s.map(e=>e.country))];r(a),o(x.loaded)}catch(e){o(x.hasErrored)}})()},[]),{HOUSES:e,countries:s,setHouses:t,actualLoadingState:n}},p=()=>{let{HOUSES:e,countries:t,setHouses:s,actualLoadingState:a}=j();return a!==x.loaded?(0,r.jsx)(m,{loadingState:a}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u,{setHouses:s,HOUSES:e,countries:t}),(0,r.jsx)("div",{className:"row mb-2",children:(0,r.jsx)("h3",{className:"text-center rosy-text",children:"Collection of paranormal houses for weird but rich people"})}),(0,r.jsxs)("table",{className:"table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Address"}),(0,r.jsx)("th",{children:"Country"}),(0,r.jsx)("th",{children:"Paranormal Features"}),(0,r.jsx)("th",{children:"Price"})]})}),(0,r.jsx)("tbody",{children:e.sort((e,t)=>e.id-t.id).map(e=>(0,r.jsx)(h,{house:e},e.id))})]})]})};function g(e){let{houseId:t}=e,s={houseId:t,bidder:"",amount:0},[n,o]=(0,a.useState)([]),[i,l]=(0,a.useState)(s),[c,d]=(0,a.useState)(x.isLoading);return((0,a.useEffect)(()=>{(async()=>{d(x.isLoading);try{let e=await fetch("/api/bids/".concat(t)),s=await e.json();o(s),d(x.loaded)}catch(e){d(x.hasErrored)}})()},[t]),c!==x.loaded)?(0,r.jsx)(m,{loadingState:c}):(0,r.jsxs)(r.Fragment,{children:[n&&0===n.length?(0,r.jsx)("h2",{className:"rosy-text",children:"No Bids for this strange stuff"}):(0,r.jsxs)("table",{className:"table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Bidder"}),(0,r.jsx)("th",{children:"Amount"})]})}),(0,r.jsx)("tbody",{children:n.map(e=>(0,r.jsxs)("tr",{style:{cursor:"default"},children:[(0,r.jsx)("td",{children:e.bidder}),(0,r.jsx)("td",{children:e.amount})]},e.id))})]}),(0,r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(e){let t=Math.max(...n.map(e=>e.amount));if(e.amount<=t){alert("Should be grater amount than the last bid");return}e&&fetch("/api/bids/".concat(e.houseId),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(async e=>{o([...n,await e.json()]),l(s)}).catch(e=>console.error(e))}(i)},className:"add-house-form row",children:[(0,r.jsx)("div",{className:"col-4",children:(0,r.jsx)("input",{type:"text",name:"bidder",placeholder:"Bidder",value:i.bidder,onChange:e=>l({...i,bidder:e.target.value})})}),(0,r.jsx)("div",{className:"col-3",children:(0,r.jsx)("input",{type:"number",name:"price",value:i.amount,onChange:e=>l({...i,amount:parseInt(e.target.value)})})}),(0,r.jsx)("div",{className:"col-2",children:(0,r.jsx)("button",{className:"btn add-new-button",type:"submit",children:"Add"})}),(0,r.jsx)("div",{className:"col-2",children:(0,r.jsx)("img",{width:"100%",src:"/houseImages/doll-head.jpg",alt:"scary doll",title:"scary doll"})})]})]})}var f=()=>{let{param:e,navigate:t}=(0,a.useContext)(b);return(0,r.jsxs)("div",{className:"row",style:{borderTop:"2px solid gray",paddingTop:"3rem"},children:[(0,r.jsx)("div",{className:"col-6",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("img",{style:{maxHeight:"70vh",width:"auto",transform:"rotate(-4deg)"},src:"./houseImages/"+(e&&e.photo?e.photo:"default")+".jpg",alt:"House picture"})})}),(0,r.jsxs)("div",{className:"col-6",children:[(0,r.jsxs)("div",{className:"row mt-2",children:[(0,r.jsx)("h2",{className:"col-8",children:e&&e.country}),(0,r.jsx)("button",{onClick:()=>t(o.home),className:"col-2 btn btn-warning",children:"Back"})]}),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("h5",{className:"col-12",children:e&&e.address})}),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("h2",{className:"col-12 rosy-text",children:d.format(e&&e.price)})}),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-12 mt-3",children:e&&(e.description||e.paranormal_feature)})}),(0,r.jsx)(g,{houseId:e.id})]})]})};let b=a.createContext(o.home);var y=()=>{let e=(0,a.useCallback)((t,r)=>s({current:t,param:r,navigate:e}),[]),[t,s]=(0,a.useState)({current:o.home,navigate:e});return(0,r.jsxs)(b.Provider,{value:t,children:[(0,r.jsx)(c,{headerText:"I'm Andrey, and this is my demo project on basics of React 18 & Next + Bootstrap & tiny NodeJS API.",aboutProject:'It\'s a kinda auction for houses - not usual ones, but with "things". \n            They all have some paranormal features. But the code is written without any "dark energy":\n            only clean and optimized code, based on SOLID rules and other design patterns. Up-to-date: sept 2024'}),function(e){switch(e){case o.home:return(0,r.jsx)(p,{});case o.houseDetails:return(0,r.jsx)(f,{});default:return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h3",{children:[" There's no component for such navigation: ",nav.current]}),(0,r.jsx)("img",{src:"./ghost.jpg",alt:"ghost",title:"just a ghost"})]})}}(t.current)]})},v=()=>(0,r.jsx)(a.StrictMode,{children:(0,r.jsx)(y,{})})},5392:function(e){e.exports={logo:"banner_logo__Nbrrf",github:"banner_github__754Qq"}},3967:function(e,t){var s;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var s=arguments[t];s&&(e=n(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var s in e)r.call(e,s)&&e[s]&&(t=n(t,s));return t}(s)))}return e}function n(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0!==(s=(function(){return a}).apply(t,[]))&&(e.exports=s)}()}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);